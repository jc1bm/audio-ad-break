<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ad-In-Situ Maker</title>
</head>
<body>

  <h1>Audio Ad Break</h1>

  <select id="station_in">
    <option value="audio/station/absolute.wav">Absolute</option>
    <option value="audio/station/sting2.wav">Sting 2</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

    <select id="gap0">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

  <br />
  <br />
  
  <select id="ad1">
    <option value="audio/ad/ad1.wav">Ad 1</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>
    <option value="audio/ad/target.wav">Target</option>    
  </select>

  <select id="gap1">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

  <br />  

  <select id="ad2">
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad1.wav">Ad 1</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap2">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

  <br />  

  <select id="ad3">
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad1.wav">Ad 1</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap3">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

  <br />  

  <select id="ad4">
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad1.wav">Ad 1</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>   
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap4">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>  

  <br />  

  <select id="ad5">
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 1</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>   
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap5">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>    

  <br />  

  <select id="ad6">
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 1</option>
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap6">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>  

  <br />  

  <select id="ad7">
    <option value="audio/ad/ad7.wav">Ad 7</option>
    <option value="audio/ad/ad2.wav">Ad 2</option>
    <option value="audio/ad/ad3.wav">Ad 3</option>
    <option value="audio/ad/ad4.wav">Ad 4</option>
    <option value="audio/ad/ad5.wav">Ad 5</option>
    <option value="audio/ad/ad6.wav">Ad 6</option>
    <option value="audio/ad/ad7.wav">Ad 1</option>
    <option value="audio/ad/ad8.wav">Ad 8</option>
    <option value="audio/ad/none.wav">None</option>
    <option value="audio/ad/target.wav">Target</option>  
  </select>  

  <select id="gap7">
    <option value="audio/ad/gap.mp3">Gap</option>
    <option value="audio/ad/none.wav">None</option>
  </select>    

    <br />  
    <br />  

    <select id="station_out">
    <option value="audio/station/absolute.wav">Absolute</option>
    <option value="audio/station/sting2.wav">Sting 2</option>
    <option value="audio/ad/none.wav">None</option>
  </select>

<!-- ✅ Properly linked script -->
<script src="script.js" defer></script>

<!-- ✅ Runs after the selects are in the DOM -->
<script>
async function resolveTargetFormat() {
  const basePath = 'audio/ad/target';
  const formats = ['.wav', '.mp3'];

  for (const ext of formats) {
    const url = basePath + ext;
    try {
      const res = await fetch(url, { method: 'HEAD' });
      if (res.ok) {
        updateTargetOption(ext);
        break;
      }
    } catch (e) {
      console.warn(`Could not load ${url}`);
    }
  }
}

function updateTargetOption(ext) {
  const selects = document.querySelectorAll('select');
  selects.forEach(select => {
    [...select.options].forEach(option => {
      if (option.value.includes('audio/ad/target.wav')) {
        option.value = `audio/ad/target${ext}`;
      }
    });
  });
}

window.addEventListener('DOMContentLoaded', resolveTargetFormat);
</script>

